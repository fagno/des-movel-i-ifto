//caminho padrão para imagens
:imagesdir: ../images
:figure-caption: Figura
:doctype: book

//gera apresentacao
//pode se baixar os arquivos e add no diretório
:revealjsdir: https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0

//GERAR ARQUIVOS
//make slides
//make ebook

//Estilo do Sumário
:toc2: 
//após os : insere o texto que deseja ser visível
:toc-title: Sumário
:figure-caption: Figura
//numerar titulos
:numbered:
:source-highlighter: highlightjs
:icons: font
:chapter-label:
:doctype: book
:lang: pt-BR
//3+| mesclar linha tabela

= Programação para Dispositivos Móveis I
Fagno Alves Fonseca <fagno.fonseca@ifto.edu.br>
Mestre em Modelagem Computacional de Sistemas – UFT.

== Activity

A classe Activity representa uma tela da aplicação e é responsável por controlar os eventos da tela e definir qual View será responsável por desenhar a interface do usuário.

A classe da Activity deve sobrescrever o método onCreate(bundle). Método obrigatório e responsável por realizar a inicialização necessária para executar a aplicação.

IMPORTANT: Cada Activity deve ser obrigatoriamente declarada no arquivo AndroidManifest.xml.

Na prática podemos associar a palavra “activity” à palavra “tela”. Iniciar uma activity: “iniciar um tela”. A tradução da palavra activity para o português é Atividade. 

=== Classes FragmentActivity e AppCompatActivity

No Android 3.0 foram criadas a action bar e a API de fragments.

A action bar é representada pela classe android.app.ActionBar. Para utilizar essas classes em versões mais antigas do Android o Google criou a biblioteca de compatibilidade v4 (API Level 4) que é compatível com o Android 1.6 ou superior, e dentre as APIs que ela tem está contida a API
de fragments.

Para usar os fragments de compatibilidade todas as activities do projeto precisam herdar de android.support.v4.app.FragmentActivity, subclasse da
classe android.app.Activity, que permite utilizar fragments em versões anteriores do Android. 

Da mesma forma, existe a biblioteca de compatibilidade v7 (API Level 7), que é compatível com Android 2.3 ou superior. A v7 contém a action bar, que permite habilitar a action bar em dispositivos mais antigos. 

Resumindo, temos três classes de activity que você precisa
conhecer.

1. android.app.Activity: classe padrão da activity.
2. android.support.v4.app.FragmentActivity: Classe da
biblioteca de compatibilidade v4, que permite utilizar os
fragments em versões mais antigas do Android.
3. android.support.v7.app.FragmentActivity: Classe da
biblioteca de compatibilidade v7, que permite utilizar a action bar
em versões mais antigas do Android.

=== Ciclo de Vida de uma Activity

.Ciclo de Vida de uma Activity [Fonte:https://developer.android.com/guide/components/activities/activity-lifecycle?hl=pt-br] 
image::activity_lifecycle.png[] 

- onCreate(): Esse callback precisa ser implementado. Ele é acionado assim que o sistema cria a atividade. Quando a atividade é criada, ela insere o estado Criado. No método onCreate(), você executa a lógica básica de inicialização do aplicativo. Isso deve acontecer somente uma vez durante todo o período que a atividade durar. 

- onStart(): Quando a atividade insere o estado Iniciado, o sistema invoca esse callback. A chamada onStart() torna a atividade visível ao usuário, à medida que o aplicativo prepara a atividade para inserir o primeiro plano e se tornar interativa.

- onResume(): Quando a atividade insere o estado Retomado, ela vem para o primeiro plano e o sistema invoca o callback onResume(). É nesse estado que o aplicativo interage com o usuário. O aplicativo é mantido nesse estado até que algo ocorra e retire o foco do aplicativo. Um evento assim pode ser, por exemplo, o recebimento de uma chamada telefônica, a navegação do usuário para outra atividade ou o desligamento da tela do dispositivo.

- onPause(): O sistema chama esse método como a primeira indicação de que o usuário está deixando sua atividade (embora nem sempre signifique que a atividade esteja sendo destruída). Isso indica que a atividade não está mais em primeiro plano (embora ainda possa estar visível se o usuário estiver no modo de várias janelas).

- onStop(): Quando a atividade não estiver mais visível ao usuário, ela inserirá o estado Interrompido e o sistema invocará o callback onStop(). Isso pode ocorrer, por exemplo, quando uma atividade recém-iniciada preenche toda a tela. O sistema também poderá chamar onStop() quando a atividade parar de operar e estiver prestes a ser concluída.

- onDestroy(): onDestroy() é chamado antes de a atividade ser destruída. O sistema invoca esse callback porque:

1. a atividade está sendo finalizada (pelo fato de o usuário descartá-la completamente ou devido a finish() ser chamado na atividade); ou
2. o sistema está destruindo temporariamente a atividade devido a uma mudança na configuração (como a rotação do dispositivo ou o modo de várias janelas).

=== Navegando entre telas
//INCLUIR DEPOIS exemplo de uso do método startActivityForResult()

Para navegar de uma tela para outra utilizamos o método startActivity(intent) conforme exemplo a seguir. 

IMPORTANT: Este tópico tem como pré-requisito o uso de Buttons, disponível no tópico link:/Buttons[Buttons]

.Navegar de uma tela para outra
[source, java]
----
Intent intent = new Intent(this,NewActivity.class);
startActivity(intent);
----

Neste exemplo, foi criado um objeto do tipo Intent, ou seja, uma intenção. Por parâmetro foi passado a referência do contexto, neste caso o this e também a activity que deseja abrir.

Em algumas situações, não é possível representar o contexto com o this da classe, sendo necessário implementar um método dentro da activity conforme a seguir.

.Método para retornar o contexto caso o this não funcione
[source, java]
----
public Context getActivity(){
    return this;
}
----

=== Enviando dados para outra tela

Com a classe Bundle é possível enviar dados de uma activity para outra usando a estrutura chave e valor. No entanto, neste tutorial irei apresentar como fazer tal tarefa utilizando a classe Intent devido já está sendo utilizada durante a navegação entre telas.

.Enviar dados para outra activity
[source, java]
----
Intent intent = new Intent(this,NewActivity.class);
intent.putExtra("chave","Android Studio!");
startActivity(intent);
----

Para ler o parâmetro na outra activity faça conforme a seguir.

.Enviar dados para outra activity
[source, java]
----
Intent intent = getIntent();
String valor = intent.getStringExtra("chave");
----

Se você imprimir o valor da String "valor" a saída será "Android Studio!".

== Action Bar

Apresenta aos usuários as possíveis ações disponíveis no aplicativo. Neste barra, é possivel definir título do aplicativo ou telas, controle de navegação, botões customizados com as principais funções do aplicativo e menu flutuante.   

=== Ocultando a Action Bar

Ao criar uma Activity, a Action Bar é inserida por padrão, para desabalitar, ação desejável em algumas situações, por exemplo, em um form de login. O método onCreate() a seguir apresenta como fazer.

.Desabilitar a Action Bar em uma Activity
[source, java]
----
public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //oculta a ActionBar
        getSupportActionBar().hide();

    }
}
----

=== Alterar o título da Action Bar

A instrução a seguir define um título para a activity.

.Define um título para a ActionBar
[source, java]
----
getSupportActionBar().setTitle("Home");
----

=== Voltar para a tela anterior

== Layouts no Android

== Interface

=== Mensagens

=== Buttons

== Referências

1. LECHETA, Ricardo R. Google Android: Aprenda a criar aplicações
para dispositivos móveis com o Android SDK. 5ª ed. – São Paulo:
Novatec, 2016.

2. https://developer.android.com/guide/components/activities/activity-lifecycle?hl=pt-br