//caminho padrão para imagens
:imagesdir: ../images
:figure-caption: Figura
:doctype: book

//gera apresentacao
//pode se baixar os arquivos e add no diretório
:revealjsdir: https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0

//GERAR ARQUIVOS
//make slides
//make ebook

//Estilo do Sumário
:toc2: 
//após os : insere o texto que deseja ser visível
:toc-title: Sumário
:figure-caption: Figura
//numerar titulos
:numbered:
:source-highlighter: highlightjs
:icons: font
:chapter-label:
:doctype: book
:lang: pt-BR    
//3+| mesclar linha tabela

link:https://fagno.github.io/des-movel-i-ifto/[HOME]

= Programação para Dispositivos Móveis I
Fagno Alves Fonseca <fagno.fonseca@ifto.edu.br>
Mestre em Modelagem Computacional de Sistemas – UFT.

== Activity

A classe Activity representa uma tela da aplicação e é responsável por controlar os eventos da tela e definir qual View será responsável por desenhar a interface do usuário.

A classe da Activity deve sobrescrever o método onCreate(bundle). Método obrigatório e responsável por realizar a inicialização necessária para executar a aplicação.

IMPORTANT: Cada Activity deve ser obrigatoriamente declarada no arquivo AndroidManifest.xml.

Na prática podemos associar a palavra “activity” à palavra “tela”. Iniciar uma activity: “iniciar um tela”. A tradução da palavra activity para o português é Atividade. 

=== Classes FragmentActivity e AppCompatActivity

No Android 3.0 foram criadas a action bar e a API de fragments.

A action bar é representada pela classe android.app.ActionBar. Para utilizar essas classes em versões mais antigas do Android o Google criou a biblioteca de compatibilidade v4 (API Level 4) que é compatível com o Android 1.6 ou superior, e dentre as APIs que ela tem está contida a API
de fragments.

Para usar os fragments de compatibilidade todas as activities do projeto precisam herdar de android.support.v4.app.FragmentActivity, subclasse da
classe android.app.Activity, que permite utilizar fragments em versões anteriores do Android. 

Da mesma forma, existe a biblioteca de compatibilidade v7 (API Level 7), que é compatível com Android 2.3 ou superior. A v7 contém a action bar, que permite habilitar a action bar em dispositivos mais antigos. 

Resumindo, temos três classes de activity que você precisa
conhecer.

1. android.app.Activity: classe padrão da activity.
2. android.support.v4.app.FragmentActivity: Classe da
biblioteca de compatibilidade v4, que permite utilizar os
fragments em versões mais antigas do Android.
3. android.support.v7.app.FragmentActivity: Classe da
biblioteca de compatibilidade v7, que permite utilizar a action bar
em versões mais antigas do Android.

=== Ciclo de Vida de uma Activity

.Ciclo de Vida de uma Activity [Fonte: Ref.2]
image::activity_lifecycle.png[] 

- onCreate(): Esse callback precisa ser implementado. Ele é acionado assim que o sistema cria a atividade. Quando a atividade é criada, ela insere o estado Criado. No método onCreate(), você executa a lógica básica de inicialização do aplicativo. Isso deve acontecer somente uma vez durante todo o período que a atividade durar. 

- onStart(): Quando a atividade insere o estado Iniciado, o sistema invoca esse callback. A chamada onStart() torna a atividade visível ao usuário, à medida que o aplicativo prepara a atividade para inserir o primeiro plano e se tornar interativa.

- onResume(): Quando a atividade insere o estado Retomado, ela vem para o primeiro plano e o sistema invoca o callback onResume(). É nesse estado que o aplicativo interage com o usuário. O aplicativo é mantido nesse estado até que algo ocorra e retire o foco do aplicativo. Um evento assim pode ser, por exemplo, o recebimento de uma chamada telefônica, a navegação do usuário para outra atividade ou o desligamento da tela do dispositivo.

- onPause(): O sistema chama esse método como a primeira indicação de que o usuário está deixando sua atividade (embora nem sempre signifique que a atividade esteja sendo destruída). Isso indica que a atividade não está mais em primeiro plano (embora ainda possa estar visível se o usuário estiver no modo de várias janelas).

- onStop(): Quando a atividade não estiver mais visível ao usuário, ela inserirá o estado Interrompido e o sistema invocará o callback onStop(). Isso pode ocorrer, por exemplo, quando uma atividade recém-iniciada preenche toda a tela. O sistema também poderá chamar onStop() quando a atividade parar de operar e estiver prestes a ser concluída.

- onDestroy(): onDestroy() é chamado antes de a atividade ser destruída. O sistema invoca esse callback porque:

1. a atividade está sendo finalizada (pelo fato de o usuário descartá-la completamente ou devido a finish() ser chamado na atividade); ou
2. o sistema está destruindo temporariamente a atividade devido a uma mudança na configuração (como a rotação do dispositivo ou o modo de várias janelas).

=== Navegando entre telas
//INCLUIR DEPOIS exemplo de uso do método startActivityForResult()

Para navegar de uma tela para outra utilizamos o método startActivity(intent) conforme exemplo a seguir. 

IMPORTANT: Este tópico tem como pré-requisito o uso de Buttons, disponível no tópico <<#_buttons,Buttons>>.

.Navegar de uma tela para outra
[source, java]
----
Intent intent = new Intent(this,NewActivity.class);
startActivity(intent);
----

Neste exemplo, foi criado um objeto do tipo Intent, ou seja, uma intenção. Por parâmetro foi passado a referência do contexto, neste caso o this e também a activity que deseja abrir.

Em algumas situações, não é possível representar o contexto com o this da classe, sendo necessário implementar um método dentro da activity conforme a seguir.

.Método para retornar o contexto caso o this não funcione
[source, java]
----
public Context getActivity(){
    return this;
}
----

=== Enviando dados para outra tela

Com a classe Bundle é possível enviar dados de uma activity para outra usando a estrutura chave e valor. No entanto, neste tutorial irei apresentar como fazer tal tarefa utilizando a classe Intent devido já está sendo utilizada durante a navegação entre telas.

.Enviar dados para outra activity
[source, java]
----
Intent intent = new Intent(this,NewActivity.class);
intent.putExtra("chave","Android Studio!");
startActivity(intent);
----

Para ler o parâmetro na outra activity faça conforme a seguir.

.Enviar dados para outra activity
[source, java]
----
Intent intent = getIntent();
String valor = intent.getStringExtra("chave");
----

Se você imprimir o valor da String "valor" a saída será "Android Studio!".

== Action Bar

Apresenta aos usuários as possíveis ações disponíveis no aplicativo. Neste barra, é possivel definir título do aplicativo ou telas, controle de navegação, botões customizados com as principais funções do aplicativo e menu flutuante.   

=== Ocultando a Action Bar

Ao criar uma Activity, a Action Bar é inserida por padrão, para desabalitar, ação desejável em algumas situações, por exemplo, em um form de login. O método onCreate() a seguir apresenta como fazer.

.Desabilitar a Action Bar em uma Activity
[source, java]
----
public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //oculta a ActionBar
        getSupportActionBar().hide();

    }
}
----

=== Alterar o título da Action Bar

A instrução a seguir define um título para a activity.

.Define um título para a ActionBar
[source, java]
----
getSupportActionBar().setTitle("Home");
----

//=== Voltar para a tela anterior

//== Layouts no Android

== Interface

//=== Mensagens

=== Buttons

Neste tópico iremos conhecer algumas maneiras de criar eventos para botões.

O exemplo 1, demontra como criar um evento utilizando o método setOnClickListener(). Acão criada dentro do método Oncreate().

.Ação botão - exemplo 1
[source, java]
----
Button button = findViewById(R.id.button1);
button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {

        Toast.makeText(getActivity(),"Olá Turma!",Toast.LENGTH_LONG).show();

    }
});
----

O exemplo 2 define um método para cada ação de botão. Através do método setOnClickListener() é passado por parâmetro o nome do método que você deseja definir a ação do botão. Observe a estrutura do método acaobotao() definido no exemplo 2 acima. 

.Ação botão - exemplo 2
[source, java]
----
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button button = findViewById(R.id.button1);
    button.setOnClickListener(acaobotao());
}

private View.OnClickListener acaobotao() {
    return new Button.OnClickListener(){
        @Override
        public void onClick(View v) {
            Toast.makeText(getActivity(),"Olá Turma!",Toast.LENGTH_LONG).show();
        }
    };
}
----

O exemplo 3 apresenta outra maneira de definir ações de clique do botão. Neste exemplo, é necessário definir no arquivo activity_main.xml o atributo android:onClick="acaobotao" com o nome do método de ação do botão. Este atributo informa que o método será chamado na activity, sendo necessário que você faça a definição deste métodos.

.Ação botão - exemplo 3
[source, xml]
----
<Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="acaobotao"
        android:text="@string/button" />
----

.Método que faz referência ao atributo onClick do arquivo .xml
[source, java]
----
public void acaobotao(View view) {

        Toast.makeText(getActivity(),"Olá Turma!",Toast.LENGTH_LONG).show();
 
}
----

=== CheckBox

Alguns métodos no uso do CheckBox se faz importe. Por exemplo, para verificar se o checkbox está marcado ou não, utilize o método isChecked().

.Métodos CheckBox
[source, java]
----
CheckBox check = (CheckBox)findViewById(R.id.check1);
boolean valor = check.isChecked();
----

Para imprimir o valor "text" do checkbox utilize o método getText().

=== RadioButton

O componente Radio Button permite selecionar apenas uma única opção de uma lista. A classe RadioGroup define um grupo que contém a lista de opções, na qual, cada opção é representada por um RadioButton.

Para identificar o "id" do RadioButton selecionado utilize o método getCheckedRadioButtonId() da classe RadioGroup. 

.Exemplo de como identificar o Id do RadioButton selecionado
[source, java]
----
int idRBSelecionado = radioGroup.getCheckedRadioButtonId();
if(idRBSelecionado > 0){
    radioButtonSelecionado = findViewById( idRBSelecionado );
}
----

=== Spinner

O Spinner permite criar um combo com opções na tela. A tabela 1 a seguir apresenta os métodos de referência ao item selecionado.

.Métodos de referência ao item selecionado
|===
| *Método*  | *Descrição*
| getSelectedItem() | Retorna o item selecionado
| getSelectedItemId() | Retorna o id do item selecionado
| getSelectedItemPosition() | Retorna a posição do item selecionado. Posição equivalente ao array fornecido para o spinner.
|===

O exemplo a seguir descreve como utilizar o spinner para selecioanr um item da lista.

.activity_main.xml
[source, xml]
----
...
<Spinner
    android:id="@+id/spinner"
    ... />

<TextView
    android:id="@+id/textView"
    ... />
...
----

.MainActivity.java
[source, java]
----
public class MainActivity extends AppCompatActivity {

    Spinner spinner;
    ArrayAdapter adapter;
    TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        List<String> nomes = new ArrayList();
        nomes.add("Pessoa 1");
        nomes.add("Pessoa 2");
        nomes.add("Pessoa 3");

        spinner = findViewById(R.id.spinner);
        textView = findViewById(R.id.textView);

        adapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item,nomes);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_item);
        spinner.setAdapter(adapter);

        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                textView.setText(spinner.getSelectedItem().toString());
            }
            
            @Override
            public void onNothingSelected(AdapterView<?> parent) {

            }
        });

    }
}
----

O resultado é apresenta na imagem a seguir.

.saída do programa 
image::spinnerresultadoapp.png[]

=== ImageView

Para carregar uma imagem em um ImageView utilize o método setImageResource() da classe ImageView. A seguir é apresentado um exemplo.

.activity_main.xml
[source, xml]
----
...
<ImageView
    android:id="@+id/imageView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
</ImageView>
...
----

.MainActivity.java
[source, java]
----
...
ImageView imageView = findViewById(R.id.imageView);
imageView.setsetImageResource( id );
----

//=== AutoCompleteTextViewArquivo

//=== Seekbar

== Referências

1. LECHETA, Ricardo R. Google Android: Aprenda a criar aplicações
para dispositivos móveis com o Android SDK. 5ª ed. – São Paulo:
Novatec, 2016.

2. https://developer.android.com/guide/components/activities/activity-lifecycle?hl=pt-br